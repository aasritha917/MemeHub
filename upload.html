<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload to Cloudinary</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; padding: 40px; background: #f4f4f4; }
    .container { max-width: 400px; background: #fff; padding: 20px; margin: auto; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    input[type="file"] { display: block; margin: 15px 0; }
    button { padding: 10px 15px; background: #28a745; color: white; border: none; cursor: pointer; }
    a { display: block; margin-top: 20px; color: #007bff; text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Upload an Image</h2>
    <input type="file" id="fileInput" accept="image/*">
    <button onclick="uploadImage()">Upload</button>
    <a href="gallery.html">View Gallery</a>
  </div>

  <script>
    // ðŸ”¥ Firebase Config (replace with your project)
    const firebaseConfig = {
  apiKey: "AIzaSyDCM_ednUvxNqRKVMtUgy7fCOq275SsI8k",
  authDomain: "memes-64a42.firebaseapp.com",
   databaseURL:"https://memes-64a42-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "memes-64a42",
  storageBucket: "memes-64a42.firebasestorage.app",
  messagingSenderId: "856854598842",
  appId: "1:856854598842:web:253105accbb49c9ce15e83",
  measurementId: "G-RG54LZH34E"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

        const CLOUD_NAME = 'dtp3htk8j'; // your Cloudinary cloud name
    const UPLOAD_PRESET = 'memeshub'; // your unsigned upload preset name

    
    async function uploadImage() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert("Please select an image.");

      const formData = new FormData();
      formData.append('file', file);
      formData.append('upload_preset', UPLOAD_PRESET);

      try {
        const response = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {
          method: 'POST',
          body: formData
        });
        const data = await response.json();
        const imageUrl = data.secure_url;

        // Save URL to Firebase
        db.ref('images').push({ url: imageUrl });
        alert('Image uploaded and saved!');
      } catch (error) {
        console.error('Error uploading image:', error);
        alert('Upload failed!');
      }
    }
  </script>
</body>
</html>
